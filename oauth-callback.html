<!DOCTYPE html>
<html>
  <head>
    <title>OAuth Callback Page</title>
    <script src="https://js.arcgis.com/4.28/"></script>
    <script>
      require(["esri/identity/OAuthInfo", "esri/identity/IdentityManager"], function(
        OAuthInfo,
        IdentityManager
      ) {
        IdentityManager.registerOAuthInfos([
          new OAuthInfo({
            appId: "ti3fi1FqvHE2Hhyw", // Replace with your actual App ID
            popup: false // This should match the configuration in your main app
          })
        ]);

        IdentityManager.checkSignInStatus(window.location.href).then(
          function(info) {
            var opener = window.opener;
            if (opener && opener.location.origin === window.location.origin) {
              opener.postMessage(info, window.location.origin);
            }
          }
        ).catch(function(error) {
          console.error("OAuth callback error:", error);
        });
      });
    </script>
  </head>
  <body>
    <p>OAuth callback page</p>
  </body>
</html>
